"use strict";angular.module("AlphaFin",["ngRoute","ngResource","treeControl","ngSanitize"]).config(["$routeProvider",function(e){e.when("/ManageOU",{templateUrl:"App/ManageOU/ManageOU.html",controller:"ManagerOUController",controllerAs:"Manager"}).when("/GenReport",{templateUrl:"App/GenReport/GenReport.html",controller:"GenReportController",controllerAs:"GenReportCtrl"}).when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"mainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("AlphaFin").controller("MainCtrl",function(){function n(e,t,n){if(!Array.isArray(e))throw new TypeError("Invalid input type");if("number"!=typeof t)throw new TypeError("Invalid input type");if(e.length<t)for(var r=t-e.length,i=0;i<r;i++)e.push(n);return e}var e=function(e,t){if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Invalid input type");return e.length<t.length&&n(e,t.length,""),t.length<e.length&&n(t,e.length,""),{listA:e,listB:t}}(["Finite State Machine","News Item Factory","WebApi that returns newsItems","WebApi that returns newsItems from mongodb"],["Directive using bindToController","Observer pattern","Client repository using pattern","Nested Directives","Client","client object/class factory"]),t=this;t.newsBullets01=["implements <strong>decorator</strong> pattern in pure javascript pattern"],t.newsBullets02=['Implements <a href="https://plnkr.co/edit/vBfWSBZERdMN0IlcZ5I2?p=info">observer pattern</a> in multiple places'],t.newsBullets03=["This very News Item directive (and all the other new feature blocks) ...","Implements <strong>bindToController</strong>","Implements <strong>ngSanitize</strong> to pass html to the newsItem directive"],t.toDo=e.listA,t.done=e.listB}),angular.module("AlphaFin").service("treeDataService",function(){this.getTreeNodes=function(){return[{ou:"Corporate Investment",children:[{ou:"Corporate and Investment",children:[]},{ou:"Country Monitoring",children:[]}]},{ou:"Core Competities",children:[{ou:"Customer and client Solutions",children:[]},{ou:"Talent and Culture",children:[]},{ou:"Engineering",children:[]},{ou:"Data",children:[]}]},{ou:"Risk and Finances",children:[{ou:"Finances",children:[]},{ou:"Global Risk Managment",children:[]}]},{ou:"Stratagy and Control",children:[{ou:"Public Affairs",children:[]},{ou:"Legal and compliance",children:[]},{ou:"Stratagy and M&A",children:[]},{ou:"Accounting Supervisors",children:[]},{ou:"Communications",children:[]},{ou:"General Secetary",children:[]},{ou:"Internal Audit",children:[]}]}]}}),angular.module("AlphaFin").service("RapportDataService",["$resource",function(e){return e("/Data/getRapportData.json")}]),angular.module("AlphaFin").service("dutchOuDataService",["$resource",function(e){return e("/Data/TreeData001.json")}]),function(){function e(){var n=[];return{clients:n,save:function(e){n.push(e),console.log("Saved the client: "+e.name)},delete:function(e){var t=function(e,t,n){for(var r=0;r<n.length;r++)if(n[r][e]===t)return r;return-1}("id",e.id,n);n.splice(t,1)}}}angular.module("AlphaFin").service("ClientRepostitory",e),e.$inject=[]}(),function(){function e(t){[{name:"Jildert Oosten",description:"Client",partner:"Onbekend",children:"Onbekend"},{name:"A new client",description:"Client",partner:"Onbekend",children:"Onbekend"},{name:"Jichael Mackson",description:"Client",partner:"Bubbles",children:"Onbekend"},{name:"Silva Millekamp",description:"Client",partner:"Onbekend",children:"Joost Millekamp"}].forEach(function(e){new t(e).save()})}angular.module("AlphaFin").service("initializeRepository",e),e.$inject=["ObservableClient"]}(),angular.module("AlphaFin").controller("ManagerOUController",["$scope","dutchOuDataService",function(t,e){var n=this;t.treeOptions={nodeChildren:"children",dirSelectable:!0,injectClasses:{ul:"a1",li:"a2",liSelected:"a7",iExpanded:"a3",iCollapsed:"a4",iLeaf:"a5",label:"a6",labelSelected:"a8"}},n.clickNode=function(e){return n.selectedOU=e},n.name="ManageOU Controller",t.dataForTheTree=e.query(),t.dataForTheTree.$promise.then(function(e){t.dataForTheTree=e})}]),angular.module("AlphaFin").controller("GenReportController",["$scope","RapportDataService",function(e,t){var n=this;n.busy=!0,n.jsonData=t.query(),n.jsonData.$promise.then(function(e){n.busy=!1})}]),function(){function e(e){var t=1,n=function(e){this.id=t++,this.name=e.name,this.description=e.description||"Client",this.partner=e.partner,this.children=e.children,this.observers=new r,this.lastCrudAction="created"};function r(){this.observerList=[]}return n.prototype.save=function(){e.save(this),this.UpdateObservers()},n.prototype.delete=function(){e.delete(this)},n.prototype.UpdateObservers=function(){var t=this;this.observers.observerList.forEach(function(e){return e.update(t)})},r.prototype.add=function(e){return this.observerList.push(e)},n}angular.module("AlphaFin").factory("Client",e),e.$inject=["ClientRepostitory"]}(),function(){function e(e,t){var n=function(e){t.call(this,e),this.lastCrudAction=e.lastCrudAction};return(n.prototype=Object.create(t.prototype)).UpdateObservers=function(){var t=this;this.observers.observerList.forEach(function(e){return e.update(t)})},n}angular.module("AlphaFin").factory("ObservableClient",e),e.$inject=["ClientRepostitory","Client"]}(),angular.module("AlphaFin").directive("showNodeChildren",function(){return{templateUrl:"views/Shared/showNodeChildren.html",restrict:"E",scope:{},bindToController:{selectedOU:"=",name:"="},controller:function(){this.name="Mike"},controllerAs:"ctrlDirective"}}),angular.module("AlphaFin").directive("rapportViewUser",function(){return{templateUrl:"/views/Shared/RapportOverviewUser/RapportViewUser.html",controller:"RapportViewUserController",controllerAs:"RapportCtrl"}}),function(){function e(e,t,n,r){this.user={name:"Helen van den Wulp",description:"Financieel Advies",ou:"Van Dijken Groep"},e.showAddClientForm=!1,e.updateListOfClients=function(){e.listOfClients=t.clients},e.updateListOfClients()}angular.module("AlphaFin").controller("RapportViewUserController",e),e.$inject=["$scope","ClientRepostitory","initializeRepository","$rootScope"]}(),function(){function t(e){return t={restrict:"E",scope:{update:"&",client:"="},templateUrl:"/views/Shared/RapportOverviewClient/RapportViewClient.html",controller:"RapportViewClientController",controllerAs:"RapportViewClientCtrl"}}angular.module("AlphaFin").directive("rapportViewClient",t),t.$inject=["$window"]}(),function(){function e(n){this.delete=function(e,t){t.delete(),n.update()}}angular.module("AlphaFin").controller("RapportViewClientController",e),e.$inject=["$scope"]}(),function(){function e(e){this.title="controller"}angular.module("AlphaFin").controller("spinnerController",e),e.$inject=["$location"]}(),function(){function e(e){return{restrict:"E",templateUrl:"/views/Shared/Spinner/Spinner.html",controller:""}}angular.module("AlphaFin").directive("spinner",e),e.$inject=["$window"]}(),function(){function e(e){return{restrict:"E",scope:{showAddClientForm:"="},templateUrl:"/views/Shared/AddButton/AddButton.html",controller:"AddButton",controllerAs:"btn"}}angular.module("AlphaFin").directive("addButton",e),e.$inject=["$window"]}(),function(){function e(e){e.onClick=function(){e.showAddClientForm=!0}}angular.module("AlphaFin").controller("AddButton",e),e.$inject=["$scope"]}(),function(){function e(e,t,n){var r=this;function i(){o(),e.showAddClientForm=!1}function o(){r.client={name:"",partner:"",children:""}}r.visible=!1,r.submit=function(){var e=new t(r.client);e.observers.add(n),e.save(),i()},r.cancel=function(){i()},o()}angular.module("AlphaFin").controller("RapportViewAddClientController",e),e.$inject=["$scope","Client","ClientActionNotifcationDataService"]}(),function(){function e(e){return{restrict:"E",templateUrl:"/views/Shared/RapportOverviewAddClient/RapportViewAddClient.html",controller:"RapportViewAddClientController",controllerAs:"RapportViewAddClientCtrl"}}angular.module("AlphaFin").directive("rapportViewAddClient",e),e.$inject=["$window"]}(),function(){function e(e,t){t.registerObserver(function(){e.lastNotifiedClient=t.getMessage(),console.log("$scope.lastNotifiedClient: ",e.lastNotifiedClient)}),console.log("$scope.lastNotifiedClient: ",e.lastNotifiedClient)}angular.module("AlphaFin").controller("lastEditedClientNotifier",e),e.$inject=["$scope","ClientActionNotifcationDataService"]}(),function(){function e(e){return{restrict:"E",scope:{},templateUrl:"/views/Shared/LastEditedClientNotifier/lastEditedClientNotifier.html",controller:"lastEditedClientNotifier",controllerAs:"lastClientNotifier"}}angular.module("AlphaFin").directive("lastEditedClientNotifier",e),e.$inject=["$window"]}(),function(){function e(e,t){var n=this;n.trustedhtmlItems=[],e.$watch("bodyitems",function(e){angular.isDefined(e)&&(n.trustedhtmlItems=e.forEach(function(e){return t.trustAsHtml(e)}))})}angular.module("AlphaFin").controller("newsItemsController",e),e.$inject=["$scope","$sce"]}(),function(){function e(e){return{restrict:"E",bindToController:{header:"@",bodyitems:"="},scope:{},controller:"newsItemsController",controllerAs:"newsItemsCtrl",templateUrl:"/views/Shared/NewsItem/newsItem.html"}}angular.module("AlphaFin").directive("newsItem",e),e.$inject=["$window"]}();